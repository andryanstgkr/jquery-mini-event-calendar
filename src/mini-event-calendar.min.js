!function(t){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=new Date,a=n.getMonth(),i=n.getFullYear();t.fn.miniEventCalendar=t.fn.MEC=function(n){var d=t.extend({calendar_link:"",events:[],from_monday:!1},n),v=this;v.addClass("mini-cal").html('<div id="calTitle"><button class="month-mover prev"><svg fill="#FFFFFF" height="30" viewBox="0 0 24 24" width="30" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg></button><div id="monthYear"></div><button class="month-mover next"><svg fill="#FFFFFF" height="30" viewBox="0 0 24 24" width="30" xmlns="http://www.w3.org/2000/svg"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg></button></div><div><div id="calThead"></div><div id="calTbody"></div></div><div id="calTFooter"><h3 id="eventTitle">No events today.</h3><a href="javascript:void(0);" id="calLink">ALL EVENTS</a></div>');var l=v.find("#calThead"),r=v.find("#calTbody"),o=v.find("#monthYear"),s=v.find("#calTFooter"),h=v.find("#eventTitle"),f=v.find("#calLink");function c(t,n){r.html(""),o.text(e[t]+" "+n),a=t,i=n;var l=new Date(n,t),s=new Date(l);if(d.from_monday){h=s.getDay()>0?s.getDay()-1:6;1===l.getDate()&&0!==h&&r.append(u(h))}else{var h=s.getDay();1===l.getDate()&&1!=h&&r.append(u(h))}for(;l.getMonth()===t;){s=new Date(l);var f=p(l,new Date),c=null,D=d.events.findIndex(function(t){return p(s,new Date(t.date))});-1!=D&&(c=d.events[D],f&&m(c)),r.append(g(!1,l.getDate(),f,c)),l.setDate(l.getDate()+1);var F=43-v.find(".a-date").length;if(l.getMonth()!=t)for(var w=1;w<F;w++)r.append(g(!0,w))}}function u(t){if(a>0)var e=a-1,n=i;else if(a<11)e=0,n=i+1;else e=11,n=i-1;for(var d=function(t,e){var n=new Date(e,t,1),a=[];for(;n.getMonth()===t;)a.push(n.getDate()),n.setDate(n.getDate()+1);return a}(e,n),v="",l=t;l>0;l--)v+=g(!0,d[d.length-l]);return v}function g(t,e,n,a){var i="<div class='a-date blurred'><span>"+e+"</span></div>";if(!t){var d=n?"current ":"";i="<button class='a-date "+(d+=a&&null!==a?"event ":"")+"' data-event='"+JSON.stringify(a)+"'><span>"+e+"</span></button>"}return i}function m(t){t&&null!=t?(h.text(t.title),f.text("VIEW EVENT"),f.attr("href",t.link)):(h.text("No events on this day."),f.text("ALL EVENTS"),f.attr("href",d.calendar_link))}function p(t,e){return t.getFullYear()==e.getFullYear()&&t.getMonth()==e.getMonth()&&t.getDate()==e.getDate()}return h.text("No events today."),f.text("ALL EVENTS"),f.attr("href",d.calendar_link),d.from_monday?l.html("<div>M</div><div>T</div><div>W</div><div>T</div><div>F</div><div>S</div><div>S</div>"):l.html("<div>S</div><div>M</div><div>T</div><div>W</div><div>T</div><div>F</div><div>S</div>"),d.calendar_link.length||d.events.length||s.css("display","none"),v.find(".month-mover").each(function(){var e=t(this);e.bind("click",function(){e.hasClass("next")?c(a<11?a+1:0,a<11?i:i+1):c(a>0?a-1:11,a>0?i:i-1)})}),v.on("click, focusin",".a-date",function(){t(this).hasClass("blurred")||m(t(this).data("event"))}),c(a,i),v}}(jQuery);